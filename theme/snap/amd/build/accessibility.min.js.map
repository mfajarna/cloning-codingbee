{"version":3,"sources":["../src/accessibility.js"],"names":["define","$","str","Event","snapAxInit","localJouleGrader","allyReport","blockReports","get_strings","key","component","done","stringsjs","attr","parent","searchbutton","title","expr","contains","createPseudo","arg","elem","text","toUpperCase","indexOf","ctparticipantsnumber","split","document","ready","submit","focus","addtext","removetext","Tabpanel","$window","window","checkWidth","windowsize","width","resize","id","_id","$tpanel","$tabs","find","$panels","bindHandlers","init","prototype","keys","left","up","right","down","$tab","removeClass","filter","first","addClass","switchTabs","$curTab","$newTab","$curTabLink","$newTabLink","self","keydown","e","handleTabKeyDown","click","handleTabClick","tabIndex","keyCode","index","last","eq","preventDefault","length","$oldTab","enhanceform","elementid","element","getElementById","on","Events","FORM_FIELD_VALIDATION","event","msg","closest","feedback","invalidinput","prop","data","html","is","show","removeAttr","hide"],"mappings":"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","sourcesContent":["/**\n * This file is part of Moodle - http://moodle.org/\n *\n * Moodle is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Moodle is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @package   theme_snap\n * @author    Oscar Nadjar oscar.nadjar@openlms.net\n * @copyright Copyright (c) 2019 Open LMS (https://www.openlms.net)\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * JS code to assign attributes and expected behavior for elements in the Dom regarding accessibility.\n */\ndefine(['jquery', 'core/str', 'core/event'],\n    function($, str, Event) {\n        return {\n            snapAxInit: function(localJouleGrader, allyReport, blockReports) {\n\n                /**\n                 * Module to get the strings from Snap to add the aria-label attribute to new accessibility features.\n                 */\n                str.get_strings([\n                    {key: 'accessforumstringdis', component: 'theme_snap'},\n                    {key: 'accessforumstringmov', component: 'theme_snap'},\n                    {key: 'calendar', component: 'calendar'},\n                    {key: 'accessglobalsearchstring', component: 'theme_snap'},\n                    {key: 'viewcalendar', component: 'theme_snap'},\n                    {key: 'viewmyfeedback', component: 'theme_snap'},\n                    {key: 'viewmessaging', component: 'theme_snap'},\n                    {key: 'viewforumposts', component: 'theme_snap'},\n                    {key: 'editcoursesettings', component: 'theme_snap'},\n                    {key: 'pluginname', component: 'local_joulegrader'},\n                    {key: 'gradebook', component: 'local_joulegrader'},\n                    {key: 'gradebook', component: 'core_grades'},\n                    {key: 'numparticipants', component: 'core_message'},\n                    {key: 'joulereports', component: 'block_reports'},\n                    {key: 'pld', component: 'theme_snap'},\n                    {key: 'competencies', component: 'core_competency'},\n                    {key: 'outcomes', component: 'core_outcome'},\n                    {key: 'badges', component: 'core_badges'},\n                    {key: 'coursereport', component: 'report_allylti'}\n                ]).done(function(stringsjs) {\n                    if ($(\"#page-mod-forum-discuss\")) {\n                        $(\"div[data-content='forum-discussion'] div.singleselect form.form-inline \" +\n                            \"select.custom-select.singleselect\").attr(\"aria-label\", stringsjs[0]);\n                        $(\"div[data-content='forum-discussion'] div.movediscussionoption \" +\n                            \"select.custom-select.urlselect\").attr(\"aria-label\", stringsjs[1]);\n                    }\n                    $(\"i.fa-calendar\").parent().attr(\"aria-label\", stringsjs[2]);\n                    $(\"input[name='TimeEventSelector[calendar]']\").attr('aria-label', stringsjs[2]);\n                    var searchbutton = $(\"#mr-nav .simplesearchform a.btn.btn-open\");\n                    $(searchbutton).attr({\n                        title: stringsjs[3],\n                        'aria-label': stringsjs[3],\n                    });\n\n\n                    // Add needed ID's for personal menu links.\n                    $('#snap-pm-updates section a.snap-personal-menu-more small:contains(\"' + stringsjs[4] + '\")')\n                        .attr(\"id\", \"snap-pm-deadline\");\n                    $('#snap-pm-updates section a.snap-personal-menu-more small:contains(\"' + stringsjs[5] + '\")')\n                        .attr(\"id\", \"snap-pm-feedback\");\n                    $('#snap-pm-updates section a.snap-personal-menu-more small:contains(\"' + stringsjs[6] + '\")')\n                        .attr(\"id\", \"snap-pm-messages\");\n                    $('#snap-pm-updates section a.snap-personal-menu-more small:contains(\"' + stringsjs[7] + '\")')\n                        .attr(\"id\", \"snap-pm-forum-posts\");\n\n                    // Add needed ID's for course dashboard.\n                    // These ID's were added for the most used elements in the course dashboard.\n\n                    // There is not a lang string that contains {$a} participants with capital P, and this function helps with that.\n                    // Taken from https://css-tricks.com/snippets/jquery/make-jquery-contains-case-insensitive/\n                    $.expr[\":\"].contains = $.expr.createPseudo(function(arg) {\n                        return function(elem) {\n                            return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;\n                        };\n                    });\n                    var ctparticipantsnumber = stringsjs[12].split(\" \");\n                    $('section#coursetools div#coursetools-list a:contains(\"' + stringsjs[8] + '\")')\n                        .attr(\"id\", \"ct-course-settings\");\n                    $('section#coursetools div#coursetools-list a:contains(\"' + ctparticipantsnumber[1] + '\")')\n                        .attr(\"id\", \"ct-participants-number\");\n                    $('section#coursetools div#coursetools-list a:contains(\"' + stringsjs[14] + '\")')\n                        .attr(\"id\", \"ct-pld\");\n                    $('section#coursetools div#coursetools-list a:contains(\"' + stringsjs[15] + '\")')\n                        .attr(\"id\", \"ct-competencies\");\n                    $('section#coursetools div#coursetools-list a:contains(\"' + stringsjs[16] + '\")')\n                        .attr(\"id\", \"ct-outcomes\");\n                    $('section#coursetools div#coursetools-list a:contains(\"' + stringsjs[17] + '\")')\n                        .attr(\"id\", \"ct-badges\");\n\n                    // Check if the plugins are installed to pass the strings. These parameters are being passed from\n                    // $initaxvars in snap/classes/output/shared.php. More validations can be added if needed.\n                    if (localJouleGrader) {\n                        $('section#coursetools div#coursetools-list a:contains(\"' + stringsjs[9] + '\")')\n                            .attr(\"id\", \"ct-open-grader\");\n                        $('section#coursetools div#coursetools-list a:contains(\"' + stringsjs[10] + '\")')\n                            .attr(\"id\", \"ct-course-gradebook\");\n                    } else {\n                        $('section#coursetools div#coursetools-list a:contains(\"' + stringsjs[11] + '\")')\n                            .attr(\"id\", \"ct-course-gradebook\");\n                    }\n                    if (blockReports) {\n                        $('section#coursetools div#coursetools-list a:contains(\"' + stringsjs[13] + '\")')\n                            .attr(\"id\", \"ct-open-reports\");\n                    }\n                    if (allyReport) {\n                        $('section#coursetools div#coursetools-list a:contains(\"' + stringsjs[18] + '\")')\n                            .attr(\"id\", \"ct-ally\");\n                    }\n                });\n\n                $(document).ready(function() {\n                    // Add necessary attributes to needed DOM elements to new accessibility features.\n                    $(\"#page-mod-data-edit input[id*='url']\").attr(\"type\", \"url\").attr(\"autocomplete\", \"url\");\n                    $(\"#moodle-blocks aside#block-region-side-pre a.sr-only.sr-only-focusable\").attr(\"tabindex\", \"-1\");\n\n                    // Focus first invalid input after a submit is done.\n                    $('.mform').submit(function() {\n                        $('input.form-control.is-invalid:first').focus();\n                    });\n\n                    // Retrieve value from the input buttons from add/remove users in a group inside a course.\n                    var addtext = $('.groupmanagementtable #buttonscell p.arrow_button input[name=\"add\"]').attr('value');\n                    var removetext = $(\".groupmanagementtable #buttonscell p.arrow_button input[name='remove']\").attr('value');\n\n                    // Snap tab panels.\n                    new Tabpanel(\"snap-pm-accessible-tab\");\n                    new Tabpanel(\"modchooser-accessible-tab\");\n\n                    /**\n                     * Store the references outside the event handler.\n                     * Window reload to change the inputs value for Add and Remove buttons when adding new\n                     * members to a group.\n                     */\n                    var $window = $(window);\n\n                    function checkWidth() {\n                        var windowsize = $window.width();\n                        if (windowsize < 1220) {\n                            $(\".groupmanagementtable #buttonscell p.arrow_button input[name='add']\").attr(\"value\", \"+\");\n                            $(\".groupmanagementtable #buttonscell p.arrow_button input[name='remove']\").attr(\"value\", \"-\");\n                        } else if (windowsize > 1220) {\n                            $(\".groupmanagementtable #buttonscell p.arrow_button input[name='add']\").attr(\"value\", addtext);\n                            $(\".groupmanagementtable #buttonscell p.arrow_button input[name='remove']\").attr(\"value\", removetext);\n                        }\n                    }\n                    // Execute on load\n                    checkWidth();\n                    // Bind event listener\n                    $(window).resize(checkWidth);\n                });\n\n                /**\n                 * Add needed accessibility for tabs inside Snap.\n                 * This makes use of Bootstrap accessible tab panel with WAI-ARIA with the arrow keys binding codes.\n                 */\n                function Tabpanel(id) {\n                    this._id = id;\n                    this.$tpanel = $('#' + id);\n                    this.$tabs = this.$tpanel.find('.tab');\n                    this.$panels = this.$tpanel.find('.tab-pane');\n                    this.bindHandlers();\n                    this.init();\n                }\n\n                Tabpanel.prototype.keys = {\n                    left: 37,\n                    up: 38,\n                    right: 39,\n                    down: 40\n                };\n\n                Tabpanel.prototype.init = function() {\n                    var $tab;\n                    this.$panels.attr('aria-hidden', 'true');\n                    this.$panels.removeClass('active in');\n                    $tab = this.$tabs.filter('.active');\n                    if ($tab === undefined) {\n                        $tab = this.$tabs.first();\n                        $tab.addClass('active');\n                    }\n                    this.$tpanel\n                        .find('#' + $tab.find('a').attr('aria-controls'))\n                        .addClass('active in').attr('aria-hidden', 'false');\n                };\n\n                Tabpanel.prototype.switchTabs = function($curTab, $newTab) {\n                    var $curTabLink = $curTab.find('a'),\n                        $newTabLink = $newTab.find('a');\n                    $curTab.removeClass('active');\n                    $curTabLink.attr('tabindex', '-1').attr('aria-selected', 'false');\n                    $newTab.addClass('active');\n                    $newTabLink.attr('aria-selected', 'true');\n                    this.$tpanel\n                        .find('#' + $curTabLink.attr('aria-controls'))\n                        .removeClass('active in').attr('aria-hidden', 'true');\n                    this.$tpanel\n                        .find('#' + $newTabLink.attr('aria-controls'))\n                        .addClass('active in').attr('aria-hidden', 'false');\n                    $newTabLink.attr('tabindex', '0');\n                    $newTabLink.focus();\n                };\n\n                Tabpanel.prototype.bindHandlers = function() {\n                    var self = this;\n                    this.$tabs.keydown(function(e) {\n                        return self.handleTabKeyDown($(this), e);\n                    });\n                    this.$tabs.click(function(e) {\n                        return self.handleTabClick($(this), e);\n                    });\n                };\n\n                Tabpanel.prototype.handleTabKeyDown = function($tab, e) {\n                    var $newTab, tabIndex;\n                    switch (e.keyCode) {\n                        case this.keys.left:\n                        case this.keys.up: {\n                            tabIndex = this.$tabs.index($tab);\n                            if (tabIndex === 0) {\n                                $newTab = this.$tabs.last();\n                            } else {\n                                $newTab = this.$tabs.eq(tabIndex - 1);\n                            }\n                            this.switchTabs($tab, $newTab);\n                            e.preventDefault();\n                            return false;\n                        }\n                        case this.keys.right:\n                        case this.keys.down: {\n                            tabIndex = this.$tabs.index($tab);\n                            if (tabIndex === this.$tabs.length - 1) {\n                                $newTab = this.$tabs.first();\n                            } else {\n                                $newTab = this.$tabs.eq(tabIndex + 1);\n                            }\n                            this.switchTabs($tab, $newTab);\n                            e.preventDefault();\n                            return false;\n                        }\n                    }\n                };\n\n                Tabpanel.prototype.handleTabClick = function($tab) {\n                    var $oldTab = this.$tpanel.find('.tab.active');\n                    this.switchTabs($oldTab, $tab);\n                };\n            },\n\n            /**\n             * Custom form error event handler to manipulate the bootstrap markup and show\n             * nicely styled errors in an mform focusing the necessary elements in the form.\n             */\n            enhanceform: function(elementid) {\n                var element = document.getElementById(elementid);\n                $(element).on(Event.Events.FORM_FIELD_VALIDATION, function(event, msg) {\n                    event.preventDefault();\n                    var parent = $(element).closest('.form-group');\n                    var feedback = parent.find('.form-control-feedback');\n                    var invalidinput = parent.find('input.form-control.is-invalid');\n\n                    // Sometimes (atto) we have a hidden textarea backed by a real contenteditable div.\n                    if (($(element).prop(\"tagName\") == 'TEXTAREA') && parent.find('[contenteditable]')) {\n                        element = parent.find('[contenteditable]');\n                    }\n                    if (msg !== '') {\n                        parent.addClass('has-danger');\n                        parent.data('client-validation-error', true);\n                        $(element).addClass('is-invalid');\n                        $(element).attr('aria-describedby', feedback.attr('id'));\n                        $(element).attr('aria-invalid', true);\n                        invalidinput.attr('tabindex', 0);\n                        feedback.html(msg);\n\n                        // Only display and focus when the error was not already visible.\n                        if (!feedback.is(':visible')) {\n                            feedback.show();\n                            feedback.focus();\n                        }\n                    } else {\n                        if (parent.data('client-validation-error') === true) {\n                            parent.removeClass('has-danger');\n                            parent.data('client-validation-error', false);\n                            $(element).removeClass('is-invalid');\n                            $(element).removeAttr('aria-describedby');\n                            $(element).attr('aria-invalid', false);\n                            feedback.hide();\n                        }\n                    }\n                });\n            }\n        };\n    }\n);\n"],"file":"accessibility.min.js"}