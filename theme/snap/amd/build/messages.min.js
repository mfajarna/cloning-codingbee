function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("theme_snap/messages",["jquery","core/pubsub"],function(a,b){var c=[],d=560;return{init:function init(){if(0===a(".preferences-page-container").length&&0===a(".message-app.main").length&&(0!=a("#page-message-edit").length||0!=a("#page-message-index").length)){var e=a(".drawer .message-app");e.css("visibility","visible");e.animate({width:"100%"},0);document.addEventListener("messages-drawer:toggle",function(){if(a("#page-message-edit").length||a("#page-message-index").length){if(a(".block_settings").hasClass("state-visible")){if(a(window).width()<d){a(".drawer .message-app").hide()}else{a(".drawer .message-app").animate({width:"50%"},0)}}else{if(a(window).width()<d){a(".drawer .message-app").show()}else{a(".drawer .message-app").animate({width:"100%"},0)}}}});document.addEventListener("messages-drawer:pm-toggle",function(){if(a("#page-message-edit").length||a("#page-message-index").length){if(a(".snap-pm-open").length){a(".drawer .message-app").hide()}else{a(".drawer .message-app").show()}}});var f=a("div.popover-region");f.on("popoverregion:menuopened",function(){if(a("#page-message-edit").length||a("#page-message-index").length){var b=a(this).attr("id");if(-1==c.indexOf(b)){c.push(b)}if(0<c.length){if(a(window).width()<d){a(".drawer .message-app").hide()}else{a(".drawer .message-app").animate({width:"50%"},0)}}}}).bind();f.on("popoverregion:menuclosed",function(){if(a("#page-message-edit").length||a("#page-message-index").length){var b=a(this).attr("id"),e=c.indexOf(b);c.splice(e,1);if(0==c.length){if(a(window).width()<d){a(".drawer .message-app").show()}else{a(".drawer .message-app").animate({width:"100%"},0)}}}}).bind()}else if(0!=a("#page-user-profile").length||0!=a(".userprofile #message-user-button").length){b.subscribe("message-drawer-create-conversation-with-user",function(a){this.redirectToMessage(a)});b.subscribe("message-drawer-show-conversation",function(a){this.redirectToMessage(a)})}},redirectToMessage:function redirectToMessage(a){var b="";if("object"===_typeof(a)&&a.userid){b=parseInt(a.userid)}else{b=parseInt(a)}var c=M.cfg.wwwroot;window.location=c.concat("/message/index.php?id=",b)}}});
//# sourceMappingURL=messages.min.js.map
